import { jsx as s, jsxs as v } from "react/jsx-runtime";
import { assertEmpty as d, isSafari as R, mergeCSSClasses as E, COLORS_DEFAULT as ie, COLORS_DARK_MODE_DEFAULT as ae } from "@blocknote/core";
import { mergeRefs as U, useDictionary as le, useBlockNoteContext as W, FormattingToolbarController as ce, getFormattingToolbarItems as ue, FormattingToolbar as de, elementOverflow as q, usePrefersColorScheme as me, ComponentsContext as fe, BlockNoteViewRaw as ge } from "@blocknote/react";
import { Button as T, ActionIcon as L, Tooltip as Z, Stack as z, Text as C, Group as h, Chip as be, Divider as he, Card as J, Skeleton as _, Avatar as pe, TextInput as Q, Menu as p, CheckIcon as B, Tabs as P, LoadingOverlay as ve, FileInput as Se, PopoverDropdown as ye, PopoverTarget as we, Popover as xe, Badge as Ce, Loader as X, Flex as Ne, MantineContext as Te, MantineProvider as ke } from "@mantine/core";
import N, { forwardRef as m, useState as Y, useRef as j, useEffect as $, useContext as ee, createContext as Pe, useCallback as Fe } from "react";
import { useHover as Me, useFocusWithin as te, mergeRefs as A, useFocusTrap as Oe } from "@mantine/hooks";
const ne = (e, n, t = !1) => {
  const o = [];
  function r(i, a = "--bn") {
    for (const l in i) {
      const c = l.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase(), u = `${a}-${c}`;
      typeof i[l] != "object" ? (typeof i[l] == "number" && (i[l] = `${i[l]}px`), t ? n.style.removeProperty(u) : n.style.setProperty(u, i[l].toString())) : r(i[l], u);
    }
  }
  return r(e), o;
}, V = (e, n) => ne(e, n), De = {
  colors: {
    editor: {
      text: void 0,
      background: void 0
    },
    menu: {
      text: void 0,
      background: void 0
    },
    tooltip: {
      text: void 0,
      background: void 0
    },
    hovered: {
      text: void 0,
      background: void 0
    },
    selected: {
      text: void 0,
      background: void 0
    },
    disabled: {
      text: void 0,
      background: void 0
    },
    shadow: void 0,
    border: void 0,
    sideMenu: void 0,
    highlights: {
      gray: {
        text: void 0,
        background: void 0
      },
      brown: {
        text: void 0,
        background: void 0
      },
      red: {
        text: void 0,
        background: void 0
      },
      orange: {
        text: void 0,
        background: void 0
      },
      yellow: {
        text: void 0,
        background: void 0
      },
      green: {
        text: void 0,
        background: void 0
      },
      blue: {
        text: void 0,
        background: void 0
      },
      purple: {
        text: void 0,
        background: void 0
      },
      pink: {
        text: void 0,
        background: void 0
      }
    }
  },
  borderRadius: void 0,
  fontFamily: void 0
}, Ie = (e) => ne(De, e, !0), oe = (e) => /* @__PURE__ */ v(z, { gap: 0, className: "bn-tooltip", children: [
  /* @__PURE__ */ s(C, { size: "sm", lineClamp: 5, children: e.mainTooltip }),
  e.secondaryTooltip && /* @__PURE__ */ s(C, { size: "xs", lineClamp: 5, children: e.secondaryTooltip })
] }), O = m(
  (e, n) => {
    const {
      className: t,
      children: o,
      mainTooltip: r,
      secondaryTooltip: i,
      icon: a,
      isSelected: l,
      isDisabled: c,
      onClick: u,
      label: g,
      variant: b,
      ...S
    } = e;
    d(S, !1);
    const [x, y] = Y(!1), k = o ? /* @__PURE__ */ s(
      T,
      {
        "aria-label": g,
        className: t,
        onMouseDown: (w) => {
          R() && w.currentTarget.focus();
        },
        onClick: (w) => {
          y(!0), u == null || u(w);
        },
        onPointerLeave: () => y(!1),
        "aria-pressed": l,
        "data-selected": l || void 0,
        "data-test": r ? r.slice(0, 1).toLowerCase() + r.replace(/\s+/g, "").slice(1) : void 0,
        size: b === "compact" ? "compact-xs" : "xs",
        disabled: c || !1,
        ref: n,
        ...S,
        children: o
      }
    ) : /* @__PURE__ */ s(
      L,
      {
        className: t,
        "aria-label": g,
        onMouseDown: (w) => {
          R() && w.currentTarget.focus();
        },
        onClick: (w) => {
          y(!0), u == null || u(w);
        },
        onPointerLeave: () => y(!1),
        "aria-pressed": l,
        "data-selected": l || void 0,
        "data-test": r ? r.slice(0, 1).toLowerCase() + r.replace(/\s+/g, "").slice(1) : void 0,
        size: b === "compact" ? 20 : 30,
        disabled: c || !1,
        ref: n,
        ...S,
        children: a
      }
    );
    return r ? /* @__PURE__ */ s(
      Z,
      {
        disabled: x,
        withinPortal: !1,
        label: /* @__PURE__ */ s(
          oe,
          {
            mainTooltip: r,
            secondaryTooltip: i
          }
        ),
        children: k
      }
    ) : k;
  }
), Re = m((e, n) => {
  const {
    className: t,
    text: o,
    icon: r,
    isSelected: i,
    mainTooltip: a,
    secondaryTooltip: l,
    onClick: c,
    onMouseEnter: u,
    ...g
  } = e;
  d(g, !1);
  const [b, S] = Y(!1), x = /* @__PURE__ */ v(
    be,
    {
      className: t,
      checked: i === !0,
      wrapperProps: {
        onMouseEnter: u,
        onMouseLeave: () => S(!1),
        onClick: (y) => {
          S(!0), c == null || c(y);
        }
      },
      variant: "light",
      icon: null,
      ref: n,
      children: [
        /* @__PURE__ */ s("span", { children: r }),
        /* @__PURE__ */ s("span", { children: o })
      ]
    }
  );
  return !a || b ? x : /* @__PURE__ */ s(
    Z,
    {
      refProp: "rootRef",
      withinPortal: !1,
      label: /* @__PURE__ */ s(
        oe,
        {
          mainTooltip: a,
          secondaryTooltip: l
        }
      ),
      children: x
    }
  );
}), Be = m((e, n) => {
  const { className: t, children: o, ...r } = e;
  return d(r), /* @__PURE__ */ s(h, { className: t, ref: n, children: o });
}), Ee = m((e, n) => {
  const {
    className: t,
    children: o,
    headerText: r,
    selected: i,
    onFocus: a,
    onBlur: l,
    tabIndex: c,
    ...u
  } = e;
  d(u, !1);
  const g = j(null);
  return $(() => {
    var b;
    i && ((b = g.current) == null || b.scrollIntoView({
      behavior: "smooth",
      block: "center"
    }));
  }, [i]), /* @__PURE__ */ v(
    J,
    {
      className: E(t, i ? "selected" : ""),
      onFocus: a,
      onBlur: l,
      tabIndex: c,
      ref: U([n, g]),
      children: [
        r && /* @__PURE__ */ s(C, { className: "bn-header-text", children: r }),
        o
      ]
    }
  );
}), Le = m((e, n) => {
  const { className: t, children: o, ...r } = e;
  return d(r, !1), /* @__PURE__ */ s(J.Section, { className: t, ref: n, children: o });
}), ze = m((e, n) => {
  const { className: t, children: o, ...r } = e;
  return d(r, !1), /* @__PURE__ */ s(
    he,
    {
      className: t,
      label: /* @__PURE__ */ s(C, { children: o }),
      ref: n
    }
  );
}), je = m((e, n) => {
  const { authorInfo: t, timeString: o, edited: r, ...i } = e, a = le();
  return d(i, !1), t === "loading" ? /* @__PURE__ */ v(h, { children: [
    /* @__PURE__ */ s(_, { height: 24, width: 24 }),
    /* @__PURE__ */ s("div", { children: /* @__PURE__ */ s(_, { height: 12, width: 100 }) })
  ] }) : /* @__PURE__ */ v(h, { children: [
    /* @__PURE__ */ s(
      pe,
      {
        src: t.avatarUrl,
        alt: t.username,
        radius: "xl",
        size: "sm",
        color: "initials"
      }
    ),
    /* @__PURE__ */ v(C, { fz: "sm", fw: "bold", children: [
      t.username,
      /* @__PURE__ */ v(C, { fz: "xs", c: "dimmed", span: !0, ml: "xs", children: [
        o,
        " ",
        r && `(${a.comments.edited})`
      ] })
    ] })
  ] });
}), $e = m((e, n) => {
  const {
    className: t,
    showActions: o,
    authorInfo: r,
    timeString: i,
    edited: a,
    actions: l,
    children: c,
    ...u
  } = e, { hovered: g, ref: b } = Me(), { focused: S, ref: x } = te(), y = U([n, b]);
  return d(u, !1), /* @__PURE__ */ v(h, { pos: "relative", ref: y, className: t, children: [
    l && (o === !0 || o === void 0 || o === "hover" && g || S) ? /* @__PURE__ */ s(
      h,
      {
        ref: x,
        style: {
          position: "absolute",
          right: 0,
          top: 0,
          zIndex: 10
        },
        children: l
      }
    ) : null,
    /* @__PURE__ */ s(je, { ...e }),
    c
  ] });
}), Ae = m((e, n) => {
  const { className: t, autoFocus: o, onFocus: r, onBlur: i, editor: a, editable: l, ...c } = e;
  d(c, !1);
  const u = W();
  return /* @__PURE__ */ s(
    Ft,
    {
      autoFocus: o,
      className: t,
      editor: e.editor,
      sideMenu: !1,
      slashMenu: !1,
      tableHandles: !1,
      filePanel: !1,
      formattingToolbar: !1,
      editable: l,
      theme: u == null ? void 0 : u.colorSchemePreference,
      ref: n,
      onFocus: r,
      onBlur: i,
      children: /* @__PURE__ */ s(
        ce,
        {
          formattingToolbar: _e
        }
      )
    }
  );
}), _e = () => {
  const e = ue([]).filter(
    (n) => n.key !== "nestBlockButton" && n.key !== "unnestBlockButton"
  );
  return /* @__PURE__ */ s(de, { blockTypeSelectItems: [], children: e });
}, Ve = m((e, n) => {
  const {
    className: t,
    name: o,
    label: r,
    variant: i,
    icon: a,
    value: l,
    autoFocus: c,
    placeholder: u,
    disabled: g,
    onKeyDown: b,
    onChange: S,
    onSubmit: x,
    autoComplete: y,
    rightSection: k,
    ...w
  } = e;
  return d(w), /* @__PURE__ */ s(
    Q,
    {
      size: "xs",
      className: E(
        t || "",
        i === "large" ? "bn-mt-input-large" : ""
      ),
      ref: n,
      name: o,
      label: r,
      leftSection: a,
      value: l,
      autoFocus: c,
      "data-autofocus": c ? "true" : void 0,
      rightSection: k,
      placeholder: u,
      disabled: g,
      onKeyDown: b,
      onChange: S,
      onSubmit: x,
      autoComplete: y
    }
  );
}), Ge = Pe(void 0), He = (e) => {
  const { children: n, onOpenChange: t, position: o, sub: r, ...i } = e;
  return d(i), r ? /* @__PURE__ */ s(
    p.Sub,
    {
      transitionProps: { duration: 250, exitDelay: 250 },
      withinPortal: !1,
      middlewares: { flip: !0, shift: !0, inline: !1, size: !0 },
      onChange: t,
      position: o,
      children: n
    }
  ) : /* @__PURE__ */ s(
    p,
    {
      withinPortal: !1,
      middlewares: { flip: !0, shift: !0, inline: !1, size: !0 },
      onChange: t,
      position: o,
      children: n
    }
  );
}, Ke = m((e, n) => {
  const { className: t, children: o, icon: r, checked: i, subTrigger: a, onClick: l, ...c } = e;
  return d(c, !1), a ? /* @__PURE__ */ s(
    p.Sub.Item,
    {
      className: t,
      ref: n,
      leftSection: r,
      rightSection: i ? /* @__PURE__ */ s(B, { size: 10 }) : i === !1 ? /* @__PURE__ */ s("div", { className: "bn-tick-space" }) : null,
      onClick: l,
      ...c,
      children: o
    }
  ) : /* @__PURE__ */ s(
    p.Item,
    {
      className: t,
      ref: n,
      leftSection: r,
      rightSection: i ? /* @__PURE__ */ s(B, { size: 10 }) : i === !1 ? /* @__PURE__ */ s("div", { className: "bn-tick-space" }) : null,
      onClick: l,
      ...c,
      children: o
    }
  );
}), Ue = (e) => {
  const {
    children: n,
    sub: t,
    // unused
    ...o
  } = e;
  return d(o), t ? /* @__PURE__ */ s(p.Sub.Target, { children: n }) : /* @__PURE__ */ s(p.Target, { children: n });
}, We = m((e, n) => {
  const {
    className: t,
    children: o,
    sub: r,
    //unused
    ...i
  } = e;
  d(i);
  const a = ee(Ge);
  return r ? /* @__PURE__ */ s(
    p.Sub.Dropdown,
    {
      className: t,
      ref: n,
      onMouseOver: a == null ? void 0 : a.onMenuMouseOver,
      onMouseLeave: a == null ? void 0 : a.onMenuMouseLeave,
      children: o
    }
  ) : /* @__PURE__ */ s(
    p.Dropdown,
    {
      className: t,
      ref: n,
      onMouseOver: a == null ? void 0 : a.onMenuMouseOver,
      onMouseLeave: a == null ? void 0 : a.onMenuMouseLeave,
      children: o
    }
  );
}), qe = m((e, n) => {
  const { className: t, ...o } = e;
  return d(o), /* @__PURE__ */ s(p.Divider, { className: t, ref: n });
}), Ze = m((e, n) => {
  const { className: t, children: o, ...r } = e;
  return d(r), /* @__PURE__ */ s(p.Label, { className: t, ref: n, children: o });
}), Je = m((e, n) => {
  const {
    className: t,
    children: o,
    icon: r,
    onClick: i,
    onDragEnd: a,
    onDragStart: l,
    draggable: c,
    label: u,
    ...g
  } = e;
  return d(g, !1), r ? /* @__PURE__ */ s(
    L,
    {
      size: 24,
      className: t,
      ref: n,
      onClick: i,
      onDragEnd: a,
      onDragStart: l,
      draggable: c,
      "aria-label": u,
      ...g,
      children: r
    }
  ) : /* @__PURE__ */ s(
    T,
    {
      className: t,
      ref: n,
      onClick: i,
      onDragEnd: a,
      onDragStart: l,
      draggable: c,
      "aria-label": u,
      ...g,
      children: o
    }
  );
}), Qe = m((e, n) => {
  const {
    className: t,
    tabs: o,
    defaultOpenTab: r,
    openTab: i,
    setOpenTab: a,
    loading: l,
    ...c
  } = e;
  return d(c), /* @__PURE__ */ s(h, { className: t, ref: n, children: /* @__PURE__ */ v(
    P,
    {
      value: i,
      defaultValue: r,
      onChange: a,
      children: [
        l && /* @__PURE__ */ s(ve, { visible: l }),
        /* @__PURE__ */ s(P.List, { children: o.map((u) => /* @__PURE__ */ s(
          P.Tab,
          {
            "data-test": `${u.name.toLowerCase()}-tab`,
            value: u.name,
            children: u.name
          },
          u.name
        )) }),
        o.map((u) => /* @__PURE__ */ s(P.Panel, { value: u.name, children: u.tabPanel }, u.name))
      ]
    }
  ) });
}), Xe = m((e, n) => {
  const { className: t, children: o, onClick: r, label: i, ...a } = e;
  return d(a), /* @__PURE__ */ s(
    T,
    {
      size: "xs",
      "aria-label": i,
      className: t,
      ref: n,
      onClick: r,
      ...a,
      children: o
    }
  );
}), Ye = m((e, n) => {
  const { className: t, accept: o, value: r, placeholder: i, onChange: a, ...l } = e;
  return d(l), /* @__PURE__ */ s(
    Se,
    {
      size: "xs",
      className: t,
      ref: n,
      accept: o,
      value: r,
      placeholder: i,
      onChange: a,
      ...l
    }
  );
}), et = m((e, n) => {
  const { className: t, children: o, ...r } = e;
  return d(r), /* @__PURE__ */ s("div", { className: t, ref: n, children: o });
}), tt = m((e, n) => {
  const { className: t, value: o, placeholder: r, onKeyDown: i, onChange: a, ...l } = e;
  return d(l), /* @__PURE__ */ s(
    Q,
    {
      size: "xs",
      "data-test": "embed-input",
      className: t,
      ref: n,
      value: o,
      placeholder: r,
      onKeyDown: i,
      onChange: a
    }
  );
}), nt = (e) => {
  const { opened: n, position: t, children: o, ...r } = e;
  return d(r), /* @__PURE__ */ s(xe, { withinPortal: !1, opened: n, position: t, children: o });
}, ot = (e) => {
  const { children: n, ...t } = e;
  return d(t), /* @__PURE__ */ s(we, { children: n });
}, rt = m((e, n) => {
  const {
    className: t,
    children: o,
    variant: r,
    // unused
    ...i
  } = e;
  return d(i), /* @__PURE__ */ s(ye, { className: t, ref: n, children: o });
}), st = m((e, n) => {
  const { className: t, children: o, ...r } = e;
  return d(r, !1), /* @__PURE__ */ s(
    h,
    {
      align: "center",
      gap: 0,
      className: t,
      ref: n,
      ...r,
      children: o
    }
  );
}), it = m((e, n) => {
  const {
    className: t,
    children: o,
    icon: r,
    onClick: i,
    onDragEnd: a,
    onDragStart: l,
    draggable: c,
    label: u,
    ...g
  } = e;
  return d(g, !1), r ? /* @__PURE__ */ s(
    L,
    {
      size: 24,
      className: t,
      ref: n,
      onClick: i,
      onDragEnd: a,
      onDragStart: l,
      draggable: c,
      "aria-label": u,
      ...g,
      children: r
    }
  ) : /* @__PURE__ */ s(
    T,
    {
      className: t,
      ref: n,
      onClick: i,
      onDragEnd: a,
      onDragStart: l,
      draggable: c,
      "aria-label": u,
      ...g,
      children: o
    }
  );
}), at = m((e, n) => {
  const { className: t, children: o, id: r, ...i } = e;
  return d(i), /* @__PURE__ */ s(
    z,
    {
      gap: 0,
      className: t,
      ref: n,
      id: r,
      role: "listbox",
      children: o
    }
  );
}), lt = m((e, n) => {
  const { className: t, children: o, ...r } = e;
  return d(r), /* @__PURE__ */ s(h, { className: t, ref: n, children: /* @__PURE__ */ s(h, { className: "bn-mt-suggestion-menu-item-title", children: o }) });
}), ct = m((e, n) => {
  const { className: t, isSelected: o, onClick: r, item: i, id: a, ...l } = e;
  d(l);
  const c = j(null);
  return $(() => {
    if (!c.current || !o)
      return;
    const u = q(
      c.current,
      document.querySelector(".bn-suggestion-menu, #ai-suggestion-menu")
      // TODO
    );
    u === "top" ? c.current.scrollIntoView(!0) : u === "bottom" && c.current.scrollIntoView(!1);
  }, [o]), /* @__PURE__ */ v(
    h,
    {
      gap: 0,
      className: t,
      ref: A(n, c),
      id: a,
      role: "option",
      onMouseDown: (u) => u.preventDefault(),
      onClick: r,
      "aria-selected": o || void 0,
      children: [
        i.icon && /* @__PURE__ */ s(
          h,
          {
            className: "bn-mt-suggestion-menu-item-section",
            "data-position": "left",
            children: i.icon
          }
        ),
        /* @__PURE__ */ v(z, { gap: 0, className: "bn-mt-suggestion-menu-item-body", children: [
          /* @__PURE__ */ s(C, { className: "bn-mt-suggestion-menu-item-title", children: i.title }),
          /* @__PURE__ */ s(C, { className: "bn-mt-suggestion-menu-item-subtitle", children: i.subtext })
        ] }),
        i.badge && /* @__PURE__ */ s(
          h,
          {
            "data-position": "right",
            className: "bn-mt-suggestion-menu-item-section",
            children: /* @__PURE__ */ s(Ce, { size: "xs", children: i.badge })
          }
        )
      ]
    }
  );
}), ut = m((e, n) => {
  const { className: t, children: o, ...r } = e;
  return d(r), /* @__PURE__ */ s(h, { className: t, ref: n, children: o });
}), dt = m((e, n) => {
  const { className: t, ...o } = e;
  return d(o), /* @__PURE__ */ s(X, { className: t, type: "dots", size: 16, ref: n });
}), mt = m((e, n) => {
  const { className: t, children: o, id: r, columns: i, ...a } = e;
  return d(a), /* @__PURE__ */ s(
    "div",
    {
      className: t,
      style: { gridTemplateColumns: `repeat(${i}, 1fr)` },
      ref: n,
      id: r,
      role: "grid",
      children: o
    }
  );
}), ft = m((e, n) => {
  const { className: t, children: o, columns: r, ...i } = e;
  return d(i), /* @__PURE__ */ s(
    h,
    {
      className: t,
      style: { gridColumn: `1 / ${r + 1}` },
      ref: n,
      children: /* @__PURE__ */ s(h, { className: "bn-mt-suggestion-menu-item-title", children: o })
    }
  );
}), gt = m((e, n) => {
  const { className: t, isSelected: o, onClick: r, item: i, id: a, ...l } = e;
  d(l);
  const c = j(null);
  return $(() => {
    if (!c.current || !o)
      return;
    const u = q(
      c.current,
      document.querySelector(".bn-grid-suggestion-menu")
    );
    u === "top" ? c.current.scrollIntoView(!0) : u === "bottom" && c.current.scrollIntoView(!1);
  }, [o]), /* @__PURE__ */ s(
    "div",
    {
      className: t,
      ref: A(n, c),
      id: a,
      role: "option",
      onClick: r,
      "aria-selected": o || void 0,
      children: i.icon
    }
  );
}), bt = m((e, n) => {
  const {
    className: t,
    children: o,
    // unused, using "dots" instead
    columns: r,
    ...i
  } = e;
  return d(i), /* @__PURE__ */ s(
    X,
    {
      className: t,
      style: { gridColumn: `1 / ${r + 1}` },
      type: "dots",
      ref: n
    }
  );
}), ht = m((e, n) => {
  const { children: t, className: o, onMouseDown: r, onClick: i, ...a } = e;
  return d(a, !1), /* @__PURE__ */ s(
    T,
    {
      className: o,
      ref: n,
      onMouseDown: r,
      onClick: i,
      ...a,
      children: t
    }
  );
}), pt = m((e, n) => {
  const {
    className: t,
    children: o,
    draggable: r,
    onDragStart: i,
    onDragEnd: a,
    style: l,
    label: c,
    ...u
  } = e;
  return d(u, !1), /* @__PURE__ */ s(
    T,
    {
      className: t,
      ref: n,
      "aria-label": c,
      draggable: r,
      onDragStart: i,
      onDragEnd: a,
      style: l,
      ...u,
      children: o
    }
  );
}), D = m(
  (e, n) => {
    const {
      className: t,
      children: o,
      onMouseEnter: r,
      onMouseLeave: i,
      variant: a,
      ...l
    } = e;
    d(l);
    const { ref: c, focused: u } = te(), g = Oe(u), b = A(n, c, g);
    return /* @__PURE__ */ s(
      Ne,
      {
        className: t,
        ref: b,
        role: "toolbar",
        onMouseEnter: r,
        onMouseLeave: i,
        gap: a === "action-toolbar" ? 2 : void 0,
        children: o
      }
    );
  }
);
var re = {
  color: void 0,
  size: void 0,
  className: void 0,
  style: void 0,
  attr: void 0
}, G = N.createContext && /* @__PURE__ */ N.createContext(re), vt = ["attr", "size", "title"];
function St(e, n) {
  if (e == null) return {};
  var t = yt(e, n), o, r;
  if (Object.getOwnPropertySymbols) {
    var i = Object.getOwnPropertySymbols(e);
    for (r = 0; r < i.length; r++)
      o = i[r], !(n.indexOf(o) >= 0) && Object.prototype.propertyIsEnumerable.call(e, o) && (t[o] = e[o]);
  }
  return t;
}
function yt(e, n) {
  if (e == null) return {};
  var t = {};
  for (var o in e)
    if (Object.prototype.hasOwnProperty.call(e, o)) {
      if (n.indexOf(o) >= 0) continue;
      t[o] = e[o];
    }
  return t;
}
function F() {
  return F = Object.assign ? Object.assign.bind() : function(e) {
    for (var n = 1; n < arguments.length; n++) {
      var t = arguments[n];
      for (var o in t)
        Object.prototype.hasOwnProperty.call(t, o) && (e[o] = t[o]);
    }
    return e;
  }, F.apply(this, arguments);
}
function H(e, n) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    n && (o = o.filter(function(r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function M(e) {
  for (var n = 1; n < arguments.length; n++) {
    var t = arguments[n] != null ? arguments[n] : {};
    n % 2 ? H(Object(t), !0).forEach(function(o) {
      wt(e, o, t[o]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : H(Object(t)).forEach(function(o) {
      Object.defineProperty(e, o, Object.getOwnPropertyDescriptor(t, o));
    });
  }
  return e;
}
function wt(e, n, t) {
  return n = xt(n), n in e ? Object.defineProperty(e, n, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[n] = t, e;
}
function xt(e) {
  var n = Ct(e, "string");
  return typeof n == "symbol" ? n : n + "";
}
function Ct(e, n) {
  if (typeof e != "object" || !e) return e;
  var t = e[Symbol.toPrimitive];
  if (t !== void 0) {
    var o = t.call(e, n);
    if (typeof o != "object") return o;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (n === "string" ? String : Number)(e);
}
function se(e) {
  return e && e.map((n, t) => /* @__PURE__ */ N.createElement(n.tag, M({
    key: t
  }, n.attr), se(n.child)));
}
function Nt(e) {
  return (n) => /* @__PURE__ */ N.createElement(Tt, F({
    attr: M({}, e.attr)
  }, n), se(e.child));
}
function Tt(e) {
  var n = (t) => {
    var {
      attr: o,
      size: r,
      title: i
    } = e, a = St(e, vt), l = r || t.size || "1em", c;
    return t.className && (c = t.className), e.className && (c = (c ? c + " " : "") + e.className), /* @__PURE__ */ N.createElement("svg", F({
      stroke: "currentColor",
      fill: "currentColor",
      strokeWidth: "0"
    }, t.attr, o, a, {
      className: c,
      style: M(M({
        color: e.color || t.color
      }, t.style), e.style),
      height: l,
      width: l,
      xmlns: "http://www.w3.org/2000/svg"
    }), i && /* @__PURE__ */ N.createElement("title", null, i), e.children);
  };
  return G !== void 0 ? /* @__PURE__ */ N.createElement(G.Consumer, null, (t) => n(t)) : n(re);
}
function kt(e) {
  return Nt({ attr: { viewBox: "0 0 20 20", fill: "currentColor", "aria-hidden": "true" }, child: [{ tag: "path", attr: { fillRule: "evenodd", d: "M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z", clipRule: "evenodd" }, child: [] }] })(e);
}
const I = m((e, n) => {
  const { className: t, items: o, isDisabled: r, ...i } = e;
  d(i);
  const a = o.filter((l) => l.isSelected)[0];
  return a ? /* @__PURE__ */ v(
    p,
    {
      withinPortal: !1,
      transitionProps: {
        exitDuration: 0
      },
      disabled: r,
      middlewares: { flip: !0, shift: !0, inline: !1, size: !0 },
      children: [
        /* @__PURE__ */ s(p.Target, { children: /* @__PURE__ */ s(
          T,
          {
            onMouseDown: (l) => {
              R() && l.currentTarget.focus();
            },
            leftSection: a.icon,
            rightSection: /* @__PURE__ */ s(kt, {}),
            size: "xs",
            variant: "subtle",
            disabled: r,
            children: a.text
          }
        ) }),
        /* @__PURE__ */ s(p.Dropdown, { className: t, ref: n, children: o.map((l) => /* @__PURE__ */ s(
          p.Item,
          {
            onClick: l.onClick,
            leftSection: l.icon,
            rightSection: l.isSelected ? /* @__PURE__ */ s(B, { size: 10, className: "bn-tick-icon" }) : (
              // Ensures space for tick even if item isn't currently selected.
              /* @__PURE__ */ s("div", { className: "bn-tick-space" })
            ),
            disabled: l.isDisabled,
            children: l.text
          },
          l.text
        )) })
      ]
    }
  ) : null;
}), Pt = {
  FormattingToolbar: {
    Root: D,
    Button: O,
    Select: I
  },
  FilePanel: {
    Root: Qe,
    Button: Xe,
    FileInput: Ye,
    TabPanel: et,
    TextInput: tt
  },
  GridSuggestionMenu: {
    Root: mt,
    Item: gt,
    EmptyItem: ft,
    Loader: bt
  },
  LinkToolbar: {
    Root: D,
    Button: O,
    Select: I
  },
  SideMenu: {
    Root: st,
    Button: it
  },
  SuggestionMenu: {
    Root: at,
    Item: ct,
    EmptyItem: lt,
    Label: ut,
    Loader: dt
  },
  TableHandle: {
    Root: pt,
    ExtendButton: ht
  },
  Generic: {
    Badge: {
      Root: Re,
      Group: Be
    },
    Form: {
      Root: (e) => /* @__PURE__ */ s("div", { children: e.children }),
      TextInput: Ve
    },
    Menu: {
      Root: He,
      Trigger: Ue,
      Dropdown: We,
      Divider: qe,
      Label: Ze,
      Item: Ke,
      Button: Je
    },
    Popover: {
      Root: nt,
      Trigger: ot,
      Content: rt
    },
    Toolbar: {
      Root: D,
      Button: O,
      Select: I
    }
  },
  Comments: {
    Comment: $e,
    Editor: Ae,
    Card: Ee,
    CardSection: Le,
    ExpandSectionsPrompt: ze
  }
}, Ft = (e) => {
  const { className: n, theme: t, ...o } = e, r = W(), i = me(), a = (r == null ? void 0 : r.colorSchemePreference) || i, l = Fe(
    (b) => {
      if (b && (Ie(b), typeof t == "object")) {
        if ("light" in t && "dark" in t) {
          V(
            t[a === "dark" ? "dark" : "light"],
            b
          );
          return;
        }
        V(t, b);
        return;
      }
    },
    [a, t]
  ), c = ee(Te), u = typeof t == "string" ? t : a !== "no-preference" ? a : "light", g = /* @__PURE__ */ s(fe.Provider, { value: Pt, children: /* @__PURE__ */ s(
    ge,
    {
      "data-mantine-color-scheme": u,
      className: E("bn-mantine", n || ""),
      theme: typeof t == "object" ? void 0 : t,
      ...o,
      ref: l
    }
  ) });
  return c ? g : /* @__PURE__ */ s(
    ke,
    {
      withCssVariables: !1,
      getRootElement: () => {
      },
      children: g
    }
  );
}, f = [
  "#FFFFFF",
  "#EFEFEF",
  "#CFCFCF",
  "#AFAFAF",
  "#7F7F7F",
  "#3F3F3F",
  "#1F1F1F",
  "#161616",
  "#0F0F0F",
  "#000000"
], K = {
  colors: {
    editor: {
      text: f[5],
      background: f[0]
    },
    menu: {
      text: f[5],
      background: f[0]
    },
    tooltip: {
      text: f[5],
      background: f[1]
    },
    hovered: {
      text: f[5],
      background: f[1]
    },
    selected: {
      text: f[0],
      background: f[5]
    },
    disabled: {
      text: f[3],
      background: f[1]
    },
    shadow: f[2],
    border: f[1],
    sideMenu: f[2],
    highlights: ie
  },
  borderRadius: 6,
  fontFamily: '"Inter", "SF Pro Display", -apple-system, BlinkMacSystemFont, "Open Sans", "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif'
}, Et = {
  colors: {
    editor: {
      text: f[2],
      background: f[6]
    },
    menu: {
      text: f[2],
      background: f[6]
    },
    tooltip: {
      text: f[2],
      background: f[7]
    },
    hovered: {
      text: f[2],
      background: f[7]
    },
    selected: {
      text: f[2],
      background: f[8]
    },
    disabled: {
      text: f[5],
      background: f[7]
    },
    shadow: f[8],
    border: f[7],
    sideMenu: f[4],
    highlights: ae
  },
  borderRadius: K.borderRadius,
  fontFamily: K.fontFamily
};
export {
  Ft as BlockNoteView,
  V as applyBlockNoteCSSVariablesFromTheme,
  Pt as components,
  Et as darkDefaultTheme,
  f as defaultColorScheme,
  K as lightDefaultTheme,
  Ie as removeBlockNoteCSSVariables
};
//# sourceMappingURL=blocknote-mantine.js.map
